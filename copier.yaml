# Basic project information
module_name:
  type: str
  help: Name of the module (e.g., gitlab, snyk, wiz)
  default: mymodule

module_display_name:
  type: str
  help: Display name of the module (e.g., GitLab, Snyk, Wiz)
  default: "{{ module_name | replace('-', ' ') | title }}"

# Author information
author_name:
  type: str
  help: Your name
  default:

author_email:
  type: str
  help: Your email
  default:

year:
  type: int
  help: "Copyright year"
  default: "{{ '%Y' | strftime }}"
  when: false

package_name:
  type: str
  help: The name of the package to be created (e.g., mymodule)
  default: clearskies_{{ module_name|replace('-', '_') }}
  when: false

site_base_url:
  type: str
  help: The base url used for the documentation.
  default: https://clearskies.info

pypi_package_name:
  type: str
  help: The name of the PyPI package to be created (e.g., myservice)
  default: clear-skies-{{ module_name|replace('_', '-') | replace(' ', '-') }}
  when: false

docs_modules_location:
  type: str
  help: The location of the documentation modules.
  default: modules

docs_modules_location_trimmed:
  type: str
  help: The trimmed location of the documentation modules.
  default: "{{ docs_modules_location | regex_replace('^\\/|\\/$', '') }}"
  when: false

create_backends:
  type: bool
  help: Does this module need backends?
  default: false

create_columns:
  type: bool
  help: Does this module need columns?
  default: false

create_configs:
  type: bool
  help: Does this module need configs?
  default: false

create_endpoints:
  type: bool
  help: Does this module need endpoints?
  default: false

create_models:
  type: bool
  help: Does this module need models?
  default: false

_subdirectory: template_content
_templates_suffix: .jinja

# Template metadata for updates
_envops:
  block_start_string: '{%'
  block_end_string: '%}'
  variable_start_string: '{{'
  variable_end_string: '}}'
  comment_start_string: '{#'
  comment_end_string: '#}'

# Make sure git metadata is preserved for updates
_preserve_symlinks: true

_skip_if_exists:
    - "pyproject.toml"
    - "uv.lock"
    - 'src/{{ package_name }}/__init__.py'
    - 'src/{{ package_name }}/**/__init__.py'
    - "docs/python/config.json"
    - "CHANGELOG.md"
    - "LICENSE"
    - "README.md"

# No _tasks to avoid "Argument list too long" errors during copier update.
# Tasks run in temp directories during update, creating large diffs that exceed OS limits.
# See: https://github.com/copier-org/copier/pull/2377

_message_after_copy: |
  Your project "{{ module_display_name }}" has been created!

  Next steps:
    cd {{ _copier_conf.dst_path }}
    git init
    uv sync
    uv run pre-commit install
    git add .
    uv run pre-commit run --all-files
    git add .
    git commit -m "feat: Initial project setup"

_message_after_update: |
  Your project "{{ module_display_name }}" has been updated!

  Next steps:
    uv sync
    uv run pre-commit run --all-files

_extensions:
  - jinja2_time.TimeExtension
